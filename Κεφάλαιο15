# Υπολογισμός θεωρητικής τιμής ΣΜΕ σε εμπόρευμα
S = 1789.8 #Τρέχουσα Τιμή
r = 0.048775 #Επιτόκιο
d = 102 # Ημέρες μέχρι τη λήξη
c = 20 # Κόστος αποθήκευσης (ετήσιο)
cost = c *(d/360) # υπολογισμός κόστους αποθήκευσης
Fair_price = S*(1+r*(d/360)) + cost # υπολογισμός της θεωρητικής τιμής του ΣΜΕ
print(f"Θεωρητική Τιμή ΣΜΕ: {Fair_price:.2f}") # εμφανίζουμε τη θεωρητική τιμή του ΣΜΕ

# Υπολογισμός θεωρητικής τιμής ΣΜΕ σε συνάλλαγμα
S = 1.4170 #Τρέχουσα Τιμή μιας μονάδας εγχώριου νομίσματος (λίρα μεγάλες Βρετανίας-GBP) εκπεφρασμένη στο ξένο νόμισμα (Euro)
r3m_foreign = 0.039040 #Επιτόκιο 3 μηνών για ξένο νόμισμα
r3m_domestic = 0.056745 #Επιτόκιο 3 μηνών για εγχώριο νόμισμα
r6m_foreign = 0.038841 #Επιτόκιο 6 μηνών για ξένο νόμισμα
r6m_domestic = 0.055639 #Επιτόκιο 6 μηνών για εγχώριο νόμισμα
r1y_foreign = 0.038738 #Επιτόκιο 1 χρόνου για ξένο νόμισμα
r1y_domestic = 0.053960 #Επιτόκιο 1 χρόνου για εγχώριο νόμισμα
Fair_price_3m = S*(1+r3m_foreign*(90/360))/(1+r3m_domestic*(90/360)) # υπολογισμός της θεωρητικής τιμής του ΣΜΕ 3 μηνών
Fair_price_6m = S*(1+r6m_foreign*(180/360))/(1+r6m_domestic*(180/360)) # υπολογισμός της θεωρητικής τιμής του ΣΜΕ 6 μηνών
Fair_price_1y = S*(1+r1y_foreign*(360/360))/(1+r1y_domestic*(360/360)) # υπολογισμός της θεωρητικής τιμής του ΣΜΕ 1 χρόνου
print(f"Θεωρητική Τιμή ΣΜΕ 3 μηνών: {Fair_price_3m:.4f}") # εμφανίζουμε τη θεωρητική τιμή του ΣΜΕ 3 μηνών
print(f"Θεωρητική Τιμή ΣΜΕ 6 μηνών: {Fair_price_6m:.4f}") # εμφανίζουμε τη θεωρητική τιμή του ΣΜΕ 6 μηνών
print(f"Θεωρητική Τιμή ΣΜΕ 1 χρόνου: {Fair_price_1y:.4f}") # εμφανίζουμε τη θεωρητική τιμή του ΣΜΕ 1 χρόνου 

# Συνάρτηση υπολογισμού θεωρητικής τιμής ΣΜΕ σε συνάλλαγμα
def fair_price(S,r_foreign,r_domestic,t):
    """
    Υπολογισμός θεωρητικής τιμής ΣΜΕ σε μετοχικό δείκτη
    :param S: Τρέχουσα Τιμή μιας μονάδας εγχώριου νομίσματος εκπεφρασμένη στο ξένο νόμισμα
    :param r_foreign: Επιτόκιο για ξένο νόμισμα
    :param r_domestic: Επιτόκιο για εγχώριο νόμισμα
    :param t: Διάρκεια (σε έτη) μέχρι τη λήξη του ΣΜΕ
    """
    Fair_price = S*(1+r_foreign*t)/(1+r_domestic*t)
    return print(f"Θεωρητική Τιμή ΣΜΕ: {Fair_price:.4f}")

# Υπολογισμός θεωρητικής τιμής ΣΜΕ σε μετοχικό δείκτη
S = 1146 #Τρέχουσα Τιμή Δείκτη
r = 0.057 #Επιτόκιο
d = 78 # Ημέρες μέχρι τη λήξη
q = 0.014 # Μερισματική Απόδοση Δείκτη (ετήσια)
div = S*q *(d/360) # υπολογισμός μερισμάτων ως μονάδες δείκτη
Fair_price = S*(1+r*(d/360)) - div # υπολογισμός της θεωρητικής τιμής του ΣΜΕ
print(f"Θεωρητική Τιμή ΣΜΕ: {Fair_price:.2f}") # εμφανίζουμε τη θεωρητική τιμή του ΣΜΕ

# Συνάρτηση υπολογισμού θεωρητικής τιμής ΣΜΕ σε μετοχικό δείκτη
def fair_price(S,r,d,q):
    """
    Υπολογισμός θεωρητικής τιμής ΣΜΕ σε μετοχικό δείκτη
    :param S: Τρέχουσα Τιμή Δείκτη
    :param r: Επιτόκιο (ετήσιο)
    :param d: Ημέρες μέχρι τη λήξη του ΣΜΕ
    :param q: Μερισματική Απόδοση Δείκτη (ετήσια)
    """
    div = S*q *(d/360)
    Fair_price = S*(1+r*(d/360)) - div
    return print(f"Θεωρητική Τιμή ΣΜΕ: {Fair_price:.2f}")

# Αναλογία αντιστάθμισης
# εισάγουμε τις βιβλιοθήκες που θα χρειαστούμε
import scipy as sp
import numpy as np
Future_Today=1466.6
Index_return= -0.052
value_Portfolio=20000000    
beta=0.89
beta_Target=0
Value_Point= 250
# Αριθμός ΣΜΕ
Futures_value= Future_Today*Value_Point
n= round((beta_Target-beta)*value_Portfolio/Futures_value)
print("Αριθμός ΣΜΕ=",n)
# Αποτέλεσμα Αντιστάθμισης
v1= Future_Today
v2= Future_Today*(1+Index_return)
Portfolio_result= beta*value_Portfolio*Index_return
Futures_result= round(n*(v2-v1)*Value_Point,1)
net=round(Futures_result+Portfolio_result,1)
print("Κέρδος/Ζημία Χαρτοφυλακίου=", Portfolio_result)
print("Κέρδος/Ζημία ΣΜΕ=", Futures_result)
print("Συνολικό Κέρδος/Ζημία=", net)
